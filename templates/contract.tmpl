{{- $warning := "\xE2\x9A\xA0" }}
{{- $TEL := "\xF0\x9F\x93\x9E" }}
{{- $HOUSE := "\xF0\x9F\x8F\xA0" }}
{{- $OFFICE := "\xF0\x9F\x8F\xA2" }}
[<code>{{ .ContractID }}</code>]{{ if .Terminated }}{{ $warning }}[TERMINATED]{{ end }}
{{- if .Name }}
<b>{{ .Name }}</b>
{{- end }}
{{- if .Company }}
<i>{{ .Company }}</i>
{{- end }}
{{- range .Contacts }}
{{ $TEL }} <code>{{ . }}</code>
{{- end }}
{{- if .Street }}
{{ $HOUSE }} <code>{{ .Street }} {{ .House }}{{ if .Room }} - {{ .Room }}{{ end }}</code>
{{- end }}
{{- if .Office }}
{{ $OFFICE }} <code>{{ .Office }}</code>
{{- end }}
{{- if .SwitchIP }}
<i>Switch: </i><code>{{ .SwitchIP }} {{ .Port }}</code>
{{- end }}
{{- if .Cable }}
<i>Cable: </i><code>{{ .Cable }}</code>
{{- end }}
{{- if .Comment }}
<i>Comment: </i><pre>{{ .Comment }}</pre>
{{- end }}
{{- with .Billing.Inet }}
{{- if .ID }}

<b>Internet</b> {{- template "account" . }}
{{- if .Tariff }}
<i>Tariff: </i><code>{{ .Tariff }}</code>
{{- end }}
{{- range .IPs }}
<code>{{ . }}</code>
{{- end }}
{{- end }}
{{- end }}
{{- with .Billing.Tel }}
{{- if .ID }}

<b>Telephony</b> {{- template "account" . }}
{{- range .Numbers }}
<code>{{ . }}</code>
{{- end }}
{{- end }}
{{- end }}
{{- with .Billing.LDTel }}
{{- if .ID }}

<b>LD/ILD Telephony</b> {{- template "account" . }}
{{- range .Numbers }}
<code>{{ . }}</code>
{{- end }}
{{- end }}
{{- end }}
{{- with .Billing.TV }}
{{- if .ID }}

<b>TV</b>
{{- template "account" . }}
{{- end }}
{{- end }}

{{- define "account" -}}
{{- $warning := "\xE2\x9A\xA0" }} [<code>{{ .ID }}</code>] 
{{- if not .Enabled }}{{ $warning }}[<code>OFF</code>]{{ end }}
<i>Balance: </i><code>{{ .Balance }}</code> <i>Credit: </i><code>{{ .Credit }}</code>
{{- if .Services }}
<i>Services:</i>
{{- range .Services }}
<pre>{{ . }}</pre>
{{- end }}
{{- end }}
{{- end }}
